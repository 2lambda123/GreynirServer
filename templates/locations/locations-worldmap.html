

<div class="panel panel-default">

   <div id="worldmap_container" style="width: 100%; height:550px;"></div>

</div>

<link href="{{ url_for('static', filename='css/jquery-jvectormap-2.0.3.css') }}" rel='stylesheet' type='text/css'>
<script src="{{ url_for('static', filename='js/jquery-jvectormap-2.0.3.min.js') }}" defer></script>
<script src="http://jvectormap.com/js/jquery-jvectormap-world-mill.js" defer></script>
<script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>

var c = {{ country_data | safe }};

document.addEventListener("DOMContentLoaded", function(event) { 
   $('#worldmap_container').vectorMap({
      map: 'world_mill',
      regionsSelectable: true,
      regionsSelectableOne: true,
      regionStyle: {
         initial: {
            fill: '#f8f4d8'
         },
         selected: {
            fill: '#a00'
         }
      },
      //backgroundColor: '#66CCFF',
      series: {
         regions: [{
            values: c,
            scale: ['#fcfeff', '#007297'],
            normalizeFunction: 'polynomial'
         }]
      },
      onRegionTipShow: function(e, el, code){
         var cname = code;
         el.html(cname);
         console.log("SMOO!");
		},
   });


});


// (document).ready(function(){
//    $.ajaxSetup({async: false});
//         $.getScript('http://lemurinn.is/country-tag-json/', function(response, status) {
//             initVectorMap(countryTagData);
//         });
//    $.ajaxSetup({async: true});
// });

// function initVectorMap (data) {
//     $('#worldmap').vectorMap({
//         regionsSelectable: true,
//         regionsSelectableOne: true,
//         regionStyle: {
//               initial: {
//                 fill: '#f8f4d8'
//               },
//               selected: {
//                 fill: '#a00'
//               }
//             },
//         backgroundColor: '#282828',
//       series: {
//         regions: [{
//           values: data,
//           scale: ['#fcfeff', '#005277'], //['#cbffc8', '#006c24'],//
//           normalizeFunction: 'polynomial'
//         }]
//       },
//     });        
// }

</script>