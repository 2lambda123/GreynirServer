
{% extends "container.html" %}

{% block styles %}

<link href="{{ url_for('static', filename='main.css') }}" rel='stylesheet' type='text/css'>

{% endblock %}

{% block scripts %}

{% endblock %}

{% block content %}

<div class="text-container">

   <div class="input">

      <p class="header"><a href="{{ url_for('main') }}"><img src="{{ url_for('static', filename='GreynirLogo404x180.png') }}" width=202 height=90></a></p>

      <p class="author">málgreinir fyrir íslensku<br>
      <b>alfa-prófunarútgáfa</b><br>
      eftir Vilhjálm Þorsteinsson<br>
      (sjá <a href="https://github.com/vthorsteinsson/Reynir" target="_blank">nánar á GitHub</a>)</p>

      <p class="stats">Nota málfræðiskrá
      <a href="https://github.com/vthorsteinsson/Reynir/blob/master/Reynir.grammar" target="_blank">{{ grammar.file_name }}</a>
      frá {{ "%0.19s" | format(grammar.file_time) }}</p>
      <p class="stats">{{ grammar.num_nonterminals }} nonterminals,
      {{ grammar.num_terminals }} terminals,
      {{ grammar.num_productions }} productions</p>

      <p class="guide"><b>Sláðu inn texta eða vefslóð til að greina</b>
{%- if debug_mode -%}
      , eða <a href="{{ url_for('test') }}">smelltu hér til keyra próf</a>
{%- else -%}
      , eða veldu frétt eða nafn úr listunum fyrir neðan
{%- endif -%}
      :</p>

      <input type="text" name="url" id="url" tabindex="1"
         maxlength=512 autofocus required class="text" value="{{ default_text }}"
         onClick="this.setSelectionRange(0, this.value.length)"/>

      <div class="btn" id="url-ok" title="Greina" tabindex="2"
         onclick="analyzeUrl()">Greina</div>

   </div>

   <div class="tab-header">
      <span id="hdr-topnews" class="tab selected">
         <span class="glyphicon glyphicon-time"></span>
         &nbsp;Nýjustu fréttir
      </span>
      <span id="hdr-toppeople" class="tab">
         <span class="glyphicon glyphicon-user"></span>
         &nbsp;Fólk í fréttum
      </span>
      <span id="hdr-output" class="tab">
         <span class="glyphicon glyphicon-eye-open"></span>
         &nbsp;Málgreining
      </span>
   </div>

   <div class="tab-area">

      <div id="output" class="main-tab">

         <!-- Popup with info about the word being hovered over -->
         <div class="info"></div>

         <p class="tok-info">Textinn inniheldur <span id="tok-num"></span> eindir í
            <span id="num-sent"></span> málsgreinum.
            Eindagreining tók <span id="tok-time"></span> sekúndur en
            málfræðigreining <span id="parse-time"></span> sekúndur.
            Það tókst að greina <span id="num-parsed-sent"></span> málsgreinar eða
            <span id="num-parsed-ratio"></span>%. Margræðnistuðull var
            <span id="avg-ambig-factor"></span>.</p>

         <div id="guide">
            <p><span class="green glyphicon glyphicon-play"></span>
            <b>Smelltu á málsgrein</b> til að sjá trjágreiningu hennar.</p>
         </div>

         <div id="metadata">
         <!-- Article metadata goes here, if any -->
            <p id="meta-heading"></p>
            <p id="meta-author"></p>
            <p id="meta-timestamp"></p>
            <p id="meta-url"></p>
         </div>

         <div id="result">
         <!-- Result of analysis goes here -->

            <div class="guide-empty">
            <p><span class="green glyphicon glyphicon-play"></span>
            <b>Sláðu inn texta eða vefslóð</b> hér að ofan til að málgreina,
            <br/>eða veldu frétt eða nafn úr listunum.</p>
            </div>

         </div>

         <div id="register">
            <!-- Name register goes here -->
            <div class="reghdr">Nafnalisti</div>
            <ul id="namelist"></ul>
         </div>

         <!-- Spinner that appears while the analysis is in progress -->
         <div id="wait">Málgreining<br>í gangi...<br><br><img src="/static/wait.gif" width="48" height="48" /></div>

      </div>

      <div id="toppeople" class="main-tab">
         <!-- List of people in the news goes here -->
         <div id="plist">
{% for person in persons %}
   <div class="topitem" url="{{ person.url }}"><!--
   --><span class="name">{{ person.name }}</span><!--
   --><span class="title">{{ person.title }}</span><!--
   --></div>
{% endfor %}
         </div>
      </div>

      <div id="topnews" class="main-tab">
         <!-- List of recent top news goes here -->
         <div id="toplist">
{% for article in articles %}
   <div class="topitem" url="{{ article.url }}"><!--
   --><span class="timestamp">{{ article.timestamp }}</span><!--
   --><span class="ratio" title="{{ article.width }} trjágreind"><div class="ratio-num" style="width:{{ article.width }}">&nbsp;</div></span><!--
   --><img src="/static/{{ article.icon }}" width="16" height="16"/><!--
   --><span class="heading">{{ article.heading }}</span><!--
   --></div>
{% endfor %}
         </div>
      </div>

   </div> <!-- tab-area -->

</div>

{% endblock %}

{% block endscripts %}

<script src="{{ url_for('static', filename='main.js') }}"></script>

<script>

   function debugMode() {
{% if debug_mode %}
      return true;
{% else %}
      return false;
{% endif %}
   }

   $(document).ready(initMain);

</script>

{% endblock %}

